<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jochem Tolsma - Radboud University, the Netherlands" />


<title>RunModel</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RSiena-scripts</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">ReadMe</a>
</li>
<li>
  <a href="rscript01.html">DataFormat</a>
</li>
<li>
  <a href="rscript00.html">Descriptives</a>
</li>
<li>
  <a href="rscript02.html">VariableFormat</a>
</li>
<li>
  <a href="rscript03.html">RunModel</a>
</li>
<li>
  <a href="rscript04.html">Behaviour</a>
</li>
<li>
  <a href="rscript05.html">GOF</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JochemTolsma/RSiena-scripts">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">RunModel</h1>
<h4 class="author"><a href="https://www.jochemtolsma.nl">Jochem
Tolsma</a> - Radboud University, the Netherlands</h4>
<h4 class="date">Last compiled on juni, 2023</h4>

</div>


<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<style type="text/css">
pre.test {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  margin: 10px;
}

pre.test2 {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  margin: 10px;
  background-color: white
}


h1, .h1, h2, .h2, h3, .h3 {
    margin-top: 24px;
}


</style>
<hr />
<p>This website converted the following original .R scripts into .rmd
files.</p>
<ul>
<li>Rscript01DataFormat.R<br />
</li>
<li>RScriptSNADescriptives.R<br />
</li>
<li>Rscript02SienaVariableFormat.R<br />
</li>
<li>Rscript03SienaRunModel.R<br />
</li>
<li>Rscript04SienaBehaviour.R</li>
</ul>
<p>Please visit <a
href="https://github.com/snlab-nl/rsiena/tree/main/inst/scripts">GitHub</a>
for the latest .R files.</p>
<hr />
<div id="data" class="section level2">
<h2>Data</h2>
<p>All files (data, scripts, etc.) can also be found on <a
href="https://github.com/JochemTolsma/Rsiena-scripts">Github</a></p>
<hr />
</div>
<div id="contact" class="section level2">
<h2>Contact</h2>
<p>Specific questions with respect to the .rmd files can be addressed
to: <a href="mailto:j.tolsma@ru.nl">Jochem Tolsma</a>.</p>
<p>For questions on RSiena please visit the designated <a
href="https://github.com/snlab-nl/rsiena">GitHub</a> page.</p>
<hr />
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>A quick version of the model fitting without comments is given at the
end of this script.</p>
<p>Let us start by loading the data</p>
<pre class="r test"><code>library(RSiena)
friend.data.w1 &lt;- s501
friend.data.w2 &lt;- s502
friend.data.w3 &lt;- s503
drink &lt;- s50a
smoke &lt;- s50s
friendship &lt;- sienaDependent(
  array( c( friend.data.w1, friend.data.w2, friend.data.w3 ),
         dim = c( 50, 50, 3 ) ) )
smoke1 &lt;- coCovar( smoke[ , 1 ] )
alcohol &lt;- varCovar( drink )
mydata &lt;- sienaDataCreate( friendship, smoke1, alcohol )
# and request
mydata
# to see what you have produced.</code></pre>
<pre class="test2"><code>#&gt; Dependent variables:  friendship 
#&gt; Number of observations: 3 
#&gt; 
#&gt; Nodeset                  Actors 
#&gt; Number of nodes              50 
#&gt; 
#&gt; Dependent variable friendship      
#&gt; Type               oneMode         
#&gt; Observations       3               
#&gt; Nodeset            Actors          
#&gt; Densities          0.046 0.047 0.05
#&gt; 
#&gt; Constant covariates:  smoke1 
#&gt; Changing covariates:  alcohol</code></pre>
<p>Parameters of the model are estimated by the function
<code>siena07()</code>. This requires the data specification; the
effects specification; and a number of parameters, or settings, for the
estimation algorithm.</p>
<p>The latter are contained in an object created by the function
<code>sienaAlgorithmCreate()</code>. You can look at the help provided
by <code>?sienaAlgorithmCreate</code> to find out about options that you
may use here; for beginning users, only the two options mentioned below
are relevant.</p>
<p>Output will be written to a file with name
<strong>projname.txt</strong>, where projname is whatever name is given;
the default (used if no name is given) is Siena. This file will be
written to your current directory. New estimation runs will append to
it. A new call to print01Report will overwrite it!</p>
</div>
<div id="define-algorithm" class="section level2">
<h2>Define algorithm</h2>
<pre class="r test"><code>myalgorithm &lt;- sienaAlgorithmCreate(projname = &#39;s50_3&#39;)</code></pre>
<pre class="test2"><code>#&gt; If you use this algorithm object, siena07 will create/use an output file s50_3.txt .</code></pre>
<p>Let us first redefine the model, to obtain a simpler specification
that will serve as an illustration here.</p>
<pre class="r test"><code>myeff &lt;- getEffects( mydata )
myeff &lt;- includeEffects( myeff, transTrip, cycle3 )
myeff &lt;- includeEffects( myeff, egoX, altX, egoXaltX,
                         interaction1 = &quot;alcohol&quot; )
myeff &lt;- includeEffects( myeff, simX, interaction1 = &quot;smoke1&quot; )
myeff</code></pre>
<pre class="test2"><code>#&gt;   effectName          include fix   test  initialValue parm
#&gt; 1 transitive triplets TRUE    FALSE FALSE          0   0   
#&gt; 2 3-cycles            TRUE    FALSE FALSE          0   0   
#&gt;   effectName                  include fix   test  initialValue parm
#&gt; 1 alcohol alter               TRUE    FALSE FALSE          0   0   
#&gt; 2 alcohol ego                 TRUE    FALSE FALSE          0   0   
#&gt; 3 alcohol ego x alcohol alter TRUE    FALSE FALSE          0   0   
#&gt;   effectName        include fix   test  initialValue parm
#&gt; 1 smoke1 similarity TRUE    FALSE FALSE          0   0   
#&gt;    effectName                          include fix   test  initialValue parm
#&gt; 1  constant friendship rate (period 1) TRUE    FALSE FALSE    4.69604   0   
#&gt; 2  constant friendship rate (period 2) TRUE    FALSE FALSE    4.32885   0   
#&gt; 3  outdegree (density)                 TRUE    FALSE FALSE   -1.46770   0   
#&gt; 4  reciprocity                         TRUE    FALSE FALSE    0.00000   0   
#&gt; 5  transitive triplets                 TRUE    FALSE FALSE    0.00000   0   
#&gt; 6  3-cycles                            TRUE    FALSE FALSE    0.00000   0   
#&gt; 7  smoke1 similarity                   TRUE    FALSE FALSE    0.00000   0   
#&gt; 8  alcohol alter                       TRUE    FALSE FALSE    0.00000   0   
#&gt; 9  alcohol ego                         TRUE    FALSE FALSE    0.00000   0   
#&gt; 10 alcohol ego x alcohol alter         TRUE    FALSE FALSE    0.00000   0</code></pre>
</div>
<div id="estimate-model" class="section level2">
<h2>Estimate model</h2>
<p>The function <code>siena07()</code> actually fits the specified model
to the data. If you wish the pretty picture of Siena on the screen as
information about the progress of the algorithm, type:</p>
<pre class="r test"><code>ans &lt;- siena07( myalgorithm, data = mydata, effects = myeff)</code></pre>
<p>(ans for “answer”).</p>
<p>If however you do not want the pretty picture, or if this leads to
difficulties (which may happen e.g. on a Mac), then type
<code>ans &lt;- siena07(myalgorithm, data=mydata, effects=myeff, batch=TRUE)</code>
and intermediate information will be written to the console.</p>
<p>Function <code>siena07()</code> produces a so-called sienaFit object,
here called <code>ans</code>; and it fills in a few things in the
sienaEffects object <code>myeff</code>, if this is the first use of
<code>myeff</code> in a siena07 call. By using various different effects
objects, i.e., with different names, you can switch between
specifications.</p>
<p>The <code>batch = FALSE</code> parameters will give a graphical user
interface being opened which reports on the progress of the estimation
algorithm; <code>verbose = TRUE</code> leads to extensive diagnostic
information being sent to the console during the estimation, and results
after the estimation (these results are also copied to the output file
projname.txt, see above); while <code>batch=TRUE</code> gives only a
limited amount of printout sent to the console during the estimation
(which is seen when clicking in the console, or more immediately if the
Buffered Output is deselected in the Misc menu) which monitors the
progress of the estimation algorithm in a different way.</p>
<p>The call of siena07 leads to output in the file
<strong>s50_3.txt</strong> (or more generally projname.txt, where
projname is the name given in <code>sienaAlgorithmCreate()</code>) and
to the creation of the object which here is called ans (for
“answer”).</p>
<p>To use multiple processors, e.g., if you wish to use 2 processes,
request:</p>
<p><code>ans &lt;- siena07( myalgorithm, data = mydata, effects = myeff, nbrNodes = 2, useCluster = TRUE)</code>.</p>
<p>Adjust the nbrNodes to the number that you wish to use. If you wish
to work on with other programs while running siena07, it is advisable to
use one node less than the number of available processors. If you wish
to use other machines as well, see the more detailed instructions below.
You will then need to use the clusterString argument as well.</p>
<p>For more advanced use, it can be helpful to have access to the
networks simulated in the so-called third phase of the estimation
algorithm. These networks can be used, e.g., for checking goodness of
fit. This can be achieved by using the parameter
<code>returnDeps=TRUE</code>. The fitted object <code>ans</code> will
then have a component named “sims” which contains a list (each
iteration) of lists (each data object) of lists (each dependent network
or behavior variable) of edgelists for networks or vectors for behavior
variables. See the manual for further explanation.</p>
</div>
<div id="looking-at-the-results" class="section level2">
<h2>Looking at the results</h2>
<p>The file “s50_3.txt” will contain the results of the estimation. It
is contained in the current directory (<code>getwd()</code>). This file
can be read by any text editor. A summary of the results is obtained on
the screen by:</p>
<pre class="r test"><code>ans</code></pre>
<p>and a larger summary by…</p>
<pre class="r test"><code>summary(ans)</code></pre>
<p>Depending on the random seed and the model specification, the results
could be something like the following.</p>
<pre class="test2"><code>#&gt; Estimates, standard errors and convergence t-ratios
#&gt; 
#&gt;                                        Estimate   Standard   Convergence 
#&gt;                                                     Error      t-ratio   
#&gt; 
#&gt; Rate parameters: 
#&gt;   0.1      Rate parameter period 1      6.6716  ( 1.1063   )             
#&gt;   0.2      Rate parameter period 2      5.2175  ( 0.8756   )             
#&gt; 
#&gt; Other parameters: 
#&gt;   1.  eval outdegree (density)         -2.7241  ( 0.1299   )   -0.0200   
#&gt;   2.  eval reciprocity                  2.4322  ( 0.2218   )    0.0011   
#&gt;   3.  eval transitive triplets          0.6478  ( 0.1533   )   -0.0099   
#&gt;   4.  eval 3-cycles                    -0.0888  ( 0.3053   )   -0.0010   
#&gt;   5.  eval smoke1 similarity            0.2601  ( 0.2062   )   -0.0006   
#&gt;   6.  eval alcohol alter               -0.0183  ( 0.0694   )    0.0542   
#&gt;   7.  eval alcohol ego                  0.0329  ( 0.0823   )   -0.0099   
#&gt;   8.  eval alcohol ego x alcohol alter  0.1272  ( 0.0524   )    0.0238   
#&gt; 
#&gt; Overall maximum convergence ratio:    0.1410 
#&gt; 
#&gt; 
#&gt; Total of 2448 iteration steps.
#&gt; 
#&gt; Covariance matrix of estimates (correlations below diagonal)
#&gt; 
#&gt;        0.017       -0.019       -0.008        0.009       -0.004        0.000       -0.001       -0.001
#&gt;       -0.653        0.049        0.009       -0.025        0.000        0.000        0.001        0.000
#&gt;       -0.384        0.255        0.024       -0.041       -0.001        0.000       -0.001       -0.001
#&gt;        0.223       -0.368       -0.865        0.093        0.001       -0.002        0.002        0.001
#&gt;       -0.144        0.008       -0.039        0.020        0.043        0.003        0.004       -0.001
#&gt;        0.040        0.009        0.029       -0.083        0.200        0.005       -0.003        0.000
#&gt;       -0.087        0.052       -0.103        0.099        0.254       -0.461        0.007        0.000
#&gt;       -0.113       -0.006       -0.117        0.071       -0.066       -0.088       -0.110        0.003
#&gt; 
#&gt; Derivative matrix of expected statistics X by parameters:
#&gt; 
#&gt;      287.113      226.342      490.217      154.184       26.562       28.422       38.773      139.356
#&gt;      128.112      136.126      247.564       81.290       13.043       10.202       10.002       69.127
#&gt;      354.356      322.905     1172.742      373.094       34.328       76.117       74.884      216.170
#&gt;      162.880      157.309      545.549      181.885       15.257       32.110       26.133       93.087
#&gt;       29.118       25.466       52.316       16.536       37.043      -49.814      -46.005        3.499
#&gt;       30.168       33.346      134.721       46.378      -45.261      380.379      254.891      113.460
#&gt;       35.802       27.486      134.665       42.616      -46.233      256.219      333.935      116.675
#&gt;      157.271      132.262      311.099       99.253        4.386      108.941      111.291      578.860
#&gt; 
#&gt; Covariance matrix of X (correlations below diagonal):
#&gt; 
#&gt;      480.124      408.282     1178.634      376.914       45.481       83.832       88.161      264.640
#&gt;        0.929      402.550     1122.819      364.043       42.341       81.059       75.923      247.272
#&gt;        0.804        0.837     4473.778     1441.012      119.640      300.969      300.117      681.839
#&gt;        0.794        0.837        0.994      469.716       37.744       98.809       95.647      220.542
#&gt;        0.307        0.312        0.265        0.258       45.632      -65.343      -66.179        1.608
#&gt;        0.172        0.182        0.202        0.205       -0.435      493.848      406.971      201.555
#&gt;        0.183        0.172        0.204        0.200       -0.445        0.832      484.928      205.583
#&gt;        0.426        0.435        0.360        0.359        0.008        0.320        0.329      803.824</code></pre>
<p>The results can also be viewed externally in the output file
<strong>s50_3.txt</strong>. It is advisable that you have a look at all
three reports and understand how information is organized in each of
them.</p>
<p>To understand the table above, note that the “convergence t-ratio” is
the t-ratio for convergence checking, not the t statistic for testing
the significance of this effect! See Section 6.2 of the manual to
understand this better.<br />
In the external output file, these are called “t-ratios for deviations
from targets”. The rule of thumb is that all t-ratios for convergence
should ideally be less than 0.1 in absolute value, and the “Overall
maximum convergence ratio” should be less than 0.25; this signifies good
convergence of the algorithm.</p>
<p>In the example here, this is the case. If this would not be the case,
the best thing to do would be to continue the estimation, using the
estimates produced here, and contained in ans, as the new initial
values. This is explained below. Because the estimation algorithm is
based on random simulations of the network evolution, there always will
be small differences between different runs of the algorithm. To obtain
“publication grade” estimates, where this variability is minimized,
choose the value of parameter n3 in <code>sienaAlgorithmCreate()</code>
(“Number of iterations in phase 3”) larger than the default value of
1000; e.g., <code>n3=5000</code>.</p>
<p>With function siena07 we made ans as the object containing all the
results of the estimation. For example,</p>
<pre class="r test"><code>ans$theta

# contains the vector of parameter estimates,

ans$se

# contains the standard errors, while

ans$covtheta

# contains the covariance matrix of the estimates.</code></pre>
<pre class="test2"><code>#&gt; [1] -2.72410215  2.43219705  0.64779485 -0.08878476  0.26009179 -0.01832294  0.03288495  0.12719366
#&gt; [1] 0.12992198 0.22175531 0.15333325 0.30532725 0.20618434 0.06938592 0.08234021 0.05239594
#&gt;               [,1]          [,2]          [,3]         [,4]          [,5]          [,6]
#&gt; [1,]  0.0168797203 -1.880941e-02 -0.0076596477  0.008853468 -0.0038572243  0.0003619272
#&gt; [2,] -0.0188094090  4.917542e-02  0.0086744671 -0.024920997  0.0003774629  0.0001411977
#&gt; [3,] -0.0076596477  8.674467e-03  0.0235110857 -0.040512495 -0.0012209212  0.0003093602
#&gt; [4,]  0.0088534677 -2.492100e-02 -0.0405124955  0.093224730  0.0012589708 -0.0017580644
#&gt; [5,] -0.0038572243  3.774629e-04 -0.0012209212  0.001258971  0.0425119840  0.0028595961
#&gt; [6,]  0.0003619272  1.411977e-04  0.0003093602 -0.001758064  0.0028595961  0.0048144062
#&gt; [7,] -0.0009259353  9.576575e-04 -0.0012994933  0.002498996  0.0043121837 -0.0026351155
#&gt; [8,] -0.0007722657 -7.059677e-05 -0.0009389351  0.001141459 -0.0007161205 -0.0003194416
#&gt;               [,7]          [,8]
#&gt; [1,] -0.0009259353 -7.722657e-04
#&gt; [2,]  0.0009576575 -7.059677e-05
#&gt; [3,] -0.0012994933 -9.389351e-04
#&gt; [4,]  0.0024989959  1.141459e-03
#&gt; [5,]  0.0043121837 -7.161205e-04
#&gt; [6,] -0.0026351155 -3.194416e-04
#&gt; [7,]  0.0067799110 -4.749728e-04
#&gt; [8,] -0.0004749728  2.745335e-03</code></pre>
<p>There are several “methods” available for viewing the object
containing the results of the estimation. Above we already mentioned the
commands <code>ans</code> and <code>summary(ans)</code> The command
<code>siena.table( ans )</code> will produce in your working directory a
table formatted for inclusion in a LaTeX document. The command
<code>siena.table(ans, type="html" )</code> produces a table formatted
in html, which can be included, e.g., in a Word document. See
<code>?print.sienaFit</code> for further information, e.g., about the
use of the xtable package for RSiena; if you use xtable, see the set of
vignettes for <a
href="http://cran.r-project.org/web/packages/xtable">xtable</a>, which
gives more options.</p>
</div>
<div id="initializing-parameters-for-estimation" class="section level2">
<h2>Initializing parameters for estimation</h2>
<p>If the estimation algorithm has not produced good estimates (it ‘has
not converged well’), as will be indicated by some of the t-ratios for
convergence being larger than 0.1 or the overall maximum convergence
ratio being more than 0.25, (the precise values of these thresholds may
be taken with a gain of salt) the best thing to do is continuing the
estimation, using the estimates produced here, and contained in
<code>ans</code>, as the new initial values.</p>
<p>This is done by the option <code>prevAns</code> (‘previous ans’) as
in:</p>
<pre class="r test"><code>ans &lt;- siena07(myalgorithm, data=mydata, effects=myeff, prevAns=ans)</code></pre>
<p>the parameter estimates in <code>ans</code> then are extracted and
used in the new estimation; moreover, Phase 1 will be omitted from the
algorithm, as derivatives and covariance matrix are used from the
previous run. This should be used only if the model specification in
<code>myeff</code> has not changed, and if the provisional parameter
estimates obtained in <code>ans</code> are reasonable; if they are not
reasonable, make a fresh estimation without the <code>prevAns</code>
parameter.</p>
<p>In Section 6.3.1 of the manual you can read more about the initial
values used for the estimation algorithm; but this rarely is of any
concern. Sections 6.3-6.5 of the manual give further help.</p>
</div>
<div id="testing-effects" class="section level2">
<h2>Testing effects</h2>
<p>Three types of tests are available in SIENA:</p>
<ol style="list-style-type: decimal">
<li>t-type tests of single parameters can be carried out by dividing the
parameter estimate by its standard error. Under the null hypothesis that
the parameter is 0, these tests have approximately a standard normal
distribution.<br />
</li>
<li>Score-type tests of single and multiple parameters are described in
the manual.<br />
</li>
<li>Wald tests of single and multiple parameters can be obtained by
means of the functions `Wald.RSiena() and Multipar.RSiena(); see the
help pages for these functions and also see the manual.</li>
</ol>
<p>Parameters can be restricted by putting TRUE in the include, fix and
test columns of the effects object. For example, to request a score test
for the indegree popularity effect, the commands can be as follows.</p>
<pre class="r test"><code>myeff &lt;- setEffect(myeff, inPopSqrt, fix=TRUE, test=TRUE, initialValue=0.0)</code></pre>
<pre class="test2"><code>#&gt;   effectName                   include fix  test initialValue parm
#&gt; 1 indegree - popularity (sqrt) TRUE    TRUE TRUE          0   0</code></pre>
<pre class="r test"><code>ans &lt;- siena07(myalgorithm, data=mydata, effects=myeff)
summary(ans)</code></pre>
<pre class="test2"><code>#&gt; Estimates, standard errors and convergence t-ratios
#&gt; 
#&gt;                                         Estimate   Standard   Convergence 
#&gt;                                                      Error      t-ratio   
#&gt; 
#&gt; Rate parameters: 
#&gt;   0.1      Rate parameter period 1       6.6554  ( 1.1046   )             
#&gt;   0.2      Rate parameter period 2       5.1890  ( 0.8625   )             
#&gt; 
#&gt; Other parameters: 
#&gt;   1.  eval outdegree (density)          -2.7158  ( 0.1132   )    0.0274   
#&gt;   2.  eval reciprocity                   2.4210  ( 0.2215   )    0.0029   
#&gt;   3.  eval transitive triplets           0.6534  ( 0.1396   )    0.0284   
#&gt;   4.  eval 3-cycles                     -0.0978  ( 0.2913   )    0.0308   
#&gt;   5.  eval indegree - popularity (sqrt)  0.0000  (     NA   )    0.3776   
#&gt;   6.  eval smoke1 similarity             0.2567  ( 0.2183   )    0.0130   
#&gt;   7.  eval alcohol alter                -0.0263  ( 0.0735   )    0.0023   
#&gt;   8.  eval alcohol ego                   0.0413  ( 0.0813   )    0.0372   
#&gt;   9.  eval alcohol ego x alcohol alter   0.1268  ( 0.0512   )   -0.0458   
#&gt; 
#&gt; Overall maximum convergence ratio:    0.1256 
#&gt; 
#&gt; 
#&gt; Score test for 1 parameter:
#&gt; chi-squared = 5.91, p = 0.0150.
#&gt; 
#&gt; Total of 2277 iteration steps.
#&gt; 
#&gt; Generalised score test &lt;c&gt;
#&gt; 
#&gt; Testing the goodness-of-fit of the model restricted by
#&gt;  (1)   eval:  indegree - popularity (sqrt)                =   0.0000
#&gt; _________________________________________________
#&gt;                    
#&gt;    c =   5.9135   d.f. = 1   p-value =   0.0150
#&gt; 
#&gt;    one-sided (normal variate):  -2.4318    
#&gt; _________________________________________________
#&gt; 
#&gt; One-step estimates: 
#&gt; 
#&gt; eval:  outdegree (density)                         -1.9202
#&gt; eval:  reciprocity                                  2.3865
#&gt; eval:  transitive triplets                          0.7616
#&gt; eval:  3-cycles                                    -0.2274
#&gt; eval:  indegree - popularity (sqrt)                -0.4572
#&gt; eval:  smoke1 similarity                            0.2467
#&gt; eval:  alcohol alter                               -0.0170
#&gt; eval:  alcohol ego                                  0.0329
#&gt; eval:  alcohol ego x alcohol alter                  0.1184
#&gt; 
#&gt; Covariance matrix of estimates (correlations below diagonal)
#&gt; 
#&gt;        0.013       -0.015       -0.006        0.007           NA       -0.002        0.001        0.000       -0.001
#&gt;       -0.579        0.049        0.010       -0.029           NA       -0.003       -0.002        0.002       -0.001
#&gt;       -0.386        0.320        0.020       -0.035           NA        0.000        0.000       -0.001        0.000
#&gt;        0.218       -0.449       -0.865        0.085           NA       -0.001        0.001        0.000        0.000
#&gt;           NA           NA           NA           NA           NA           NA           NA           NA           NA
#&gt;       -0.087       -0.063        0.006       -0.012           NA        0.048        0.005        0.005       -0.001
#&gt;        0.061       -0.146       -0.038        0.048           NA        0.289        0.005       -0.002        0.000
#&gt;       -0.032        0.094       -0.053       -0.007           NA        0.257       -0.388        0.007        0.000
#&gt;       -0.124       -0.050       -0.052        0.028           NA       -0.052       -0.057       -0.029        0.003
#&gt; 
#&gt; Derivative matrix of expected statistics X by parameters:
#&gt; 
#&gt;      284.299      222.141      504.501      158.372      703.437       27.378        9.374       15.668      146.222
#&gt;      120.181      132.702      249.022       83.168      300.401       13.046        6.421        5.545       71.187
#&gt;      341.674      315.344     1189.137      378.287      933.908       27.693       52.690       56.121      211.391
#&gt;      162.848      159.319      555.189      186.252      439.895       14.401       19.962       20.182      100.416
#&gt;      518.264      403.487      980.257      305.349     1335.702       48.282       25.601       35.029      257.078
#&gt;       22.921       19.588       35.643       11.262       53.997       34.733      -52.481      -47.841        1.838
#&gt;        5.237       17.220       67.632       24.718       22.978      -47.482      341.030      226.453       53.207
#&gt;       14.356       10.101       88.628       28.566       45.451      -46.373      222.923      308.922       67.657
#&gt;      145.833      128.963      315.198       98.555      361.308        9.067       61.028       57.124      573.397
#&gt; 
#&gt; Covariance matrix of X (correlations below diagonal):
#&gt; 
#&gt;      452.077      392.831     1109.901      356.119     1170.192       42.272       34.332       49.680      272.650
#&gt;        0.925      398.880     1075.095      350.433     1028.247       37.765       39.007       46.221      256.629
#&gt;        0.813        0.838     4125.737     1332.542     3099.210       92.506      191.900      195.694      742.207
#&gt;        0.801        0.840        0.993      436.786      993.529       29.428       64.665       63.233      238.281
#&gt;        0.984        0.920        0.862        0.850     3131.486      105.581      107.672      138.616      703.409
#&gt;        0.305        0.290        0.221        0.216        0.290       42.396      -67.407      -65.517        3.849
#&gt;        0.075        0.091        0.140        0.145        0.090       -0.484      457.852      372.133      130.783
#&gt;        0.110        0.109        0.144        0.143        0.117       -0.474        0.820      450.191      147.541
#&gt;        0.450        0.451        0.405        0.400        0.441        0.021        0.214        0.244      812.051</code></pre>
<p>To see the results, including those for the score test. You can also
simply request:</p>
<pre class="r test"><code>score.Test(ans)</code></pre>
<pre class="test2"><code>#&gt; Tested effects:
#&gt;  indegree - popularity (sqrt) 
#&gt; chi-squared = 5.91, d.f. = 1; one-sided Z = -2.43; two-sided p = 0.015.</code></pre>
<p>see <code>?score.Test</code> for further explanation.</p>
</div>
<div id="time-test" class="section level2">
<h2>Time test</h2>
<p>An application of the score test is given for the special case of
parameter heterogeneity by Lospinoso et al. (2010) and implemented in
RSiena. To apply the test to the results obtained above, request,
e.g.,</p>
<pre class="r test"><code>tt2 &lt;- sienaTimeTest(ans)
tt2</code></pre>
<pre class="test2"><code>#&gt; Joint significance test of time heterogeneity:
#&gt; chi-squared =   4.87, d.f. = 8, p= 0.7712, 
#&gt; where H0: The following parameters are zero:
#&gt;  (1) (*)Dummy2:outdegree (density)
#&gt;  (2) (*)Dummy2:reciprocity
#&gt;  (3) (*)Dummy2:transitive triplets
#&gt;  (4) (*)Dummy2:3-cycles
#&gt;  (5) (*)Dummy2:smoke1 similarity
#&gt;  (6) (*)Dummy2:alcohol alter
#&gt;  (7) (*)Dummy2:alcohol ego
#&gt;  (8) (*)Dummy2:alcohol ego x alcohol alter</code></pre>
<p>If you wish more information, see <code>summary(tt2)</code>.</p>
<hr />
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<pre class="r test"><code>### Step 1: define data  
friend.data.w1 &lt;- s501
friend.data.w2 &lt;- s502
friend.data.w3 &lt;- s503
drink &lt;- s50a
smoke &lt;- s50s
# define RSiena data structures
friendship &lt;- sienaDependent( array( c( friend.data.w1, friend.data.w2, friend.data.w3 ), dim = c( 50, 50, 3 ) ) )
smoke1 &lt;- coCovar( smoke[ , 1 ] )
alcohol &lt;- varCovar( drink )
mydata &lt;- sienaDataCreate( friendship, smoke1, alcohol ) 

### Step 2: create effects structure 
myeff &lt;- getEffects( mydata )

### Step 3: get initial description
print01Report( mydata, modelname = &#39;s50_3_init&#39; )

### Step4: specify model
myeff &lt;- includeEffects( myeff, transTrip, cycle3 )
myeff &lt;- includeEffects( myeff, egoX, altX, egoXaltX, interaction1 = &quot;alcohol&quot; )
myeff &lt;- includeEffects( myeff, simX, interaction1 = &quot;smoke1&quot; )

### Step5 estimate
myAlgorithm &lt;- sienaAlgorithmCreate( projname = &#39;s50_3&#39; )
(ans &lt;- siena07( myAlgorithm, data = mydata, effects = myeff))
# (the outer parentheses lead to printing the obtained result on the screen)
# if necessary, estimate further
(ans &lt;- siena07( myAlgorithm, data = mydata, effects = myeff, prevAns=ans))</code></pre>
<hr />
<p><a href="/rscript04.html"><strong>Next: SienaBehaviour FOR MODELING
NETWORKS AND BEHAVIOUR BY RSIENA</strong></a></p>
<hr />
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlJ1bk1vZGVsIg0KYXV0aG9yOiAnW0pvY2hlbSBUb2xzbWFdKGh0dHBzOi8vd3d3LmpvY2hlbXRvbHNtYS5ubCkgLSBSYWRib3VkIFVuaXZlcnNpdHksIHRoZSBOZXRoZXJsYW5kcycNCmJpYmxpb2dyYXBoeTogcmVmZXJlbmNlcy5iaWINCmRhdGU6ICJMYXN0IGNvbXBpbGVkIG9uIGByIGZvcm1hdChTeXMudGltZSgpLCAnJUIsICVZJylgIg0Kb3V0cHV0OiANCiAgaHRtbF9kb2N1bWVudDoNCiAgICB0b2M6ICB0cnVlDQogICAgdG9jX2Zsb2F0OiB0cnVlDQogICAgbnVtYmVyX3NlY3Rpb25zOiBmYWxzZQ0KICAgIGNvZGVfZm9sZGluZzogc2hvdw0KICAgIGNvZGVfZG93bmxvYWQ6IHllcw0KLS0tDQoNCmBgYHtyLCBnbG9iYWxzZXR0aW5ncywgZWNobz1GQUxTRSwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRSwgcmVzdWx0cz0naGlkZSd9DQpsaWJyYXJ5KGtuaXRyKQ0Kb3B0c19jaHVuayRzZXQodGlkeS5vcHRzPWxpc3Qod2lkdGguY3V0b2ZmPTEwMCksdGlkeT1UUlVFLCB3YXJuaW5nID0gRkFMU0UsIG1lc3NhZ2UgPSBGQUxTRSxjb21tZW50ID0gIiM+IiwgY2FjaGU9VFJVRSwgY2xhc3Muc291cmNlPWMoInRlc3QiKSwgY2xhc3Mub3V0cHV0PWMoInRlc3QyIikpDQpvcHRpb25zKHdpZHRoID0gMTAwKQ0KcmdsOjpzZXR1cEtuaXRyKCkNCg0KDQpjb2xvcml6ZSA8LSBmdW5jdGlvbih4LCBjb2xvcikgew0KICBpZiAoa25pdHI6OmlzX2xhdGV4X291dHB1dCgpKSB7DQogICAgc3ByaW50ZigiXFx0ZXh0Y29sb3J7JXN9eyVzfSIsIGNvbG9yLCB4KQ0KICB9IGVsc2UgaWYgKGtuaXRyOjppc19odG1sX291dHB1dCgpKSB7DQogICAgc3ByaW50ZigiPHNwYW4gc3R5bGU9J2NvbG9yOiAlczsnPiVzPC9zcGFuPiIsIGNvbG9yLCANCiAgICAgIHgpDQogIH0gZWxzZSB4DQp9DQoNCmBgYA0KDQpgYGB7ciBrbGlwcHksIGVjaG89RkFMU0UsIGluY2x1ZGU9VFJVRX0NCmtsaXBweTo6a2xpcHB5KHBvc2l0aW9uID0gYygndG9wJywgJ3JpZ2h0JykpDQoja2xpcHB5OjprbGlwcHkoY29sb3IgPSAnZGFya3JlZCcpDQoja2xpcHB5OjprbGlwcHkodG9vbHRpcF9tZXNzYWdlID0gJ0NsaWNrIHRvIGNvcHknLCB0b29sdGlwX3N1Y2Nlc3MgPSAnRG9uZScpDQpgYGANCg0KYGBge2NzcywgZWNobz1GQUxTRX0NCnByZS50ZXN0IHsNCiAgbWF4LWhlaWdodDogMzAwcHg7DQogIG92ZXJmbG93LXk6IGF1dG87DQogIG92ZXJmbG93LXg6IGF1dG87DQogIG1hcmdpbjogMTBweDsNCn0NCg0KcHJlLnRlc3QyIHsNCiAgbWF4LWhlaWdodDogMzAwcHg7DQogIG92ZXJmbG93LXk6IGF1dG87DQogIG92ZXJmbG93LXg6IGF1dG87DQogIG1hcmdpbjogMTBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUNCn0NCg0KDQpoMSwgLmgxLCBoMiwgLmgyLCBoMywgLmgzIHsNCiAgICBtYXJnaW4tdG9wOiAyNHB4Ow0KfQ0KDQoNCmBgYA0KDQotLS0tDQoNClRoaXMgd2Vic2l0ZSBjb252ZXJ0ZWQgdGhlIGZvbGxvd2luZyBvcmlnaW5hbCAuUiBzY3JpcHRzIGludG8gLnJtZCBmaWxlcy4gDQoNCi0gUnNjcmlwdDAxRGF0YUZvcm1hdC5SICANCi0gUlNjcmlwdFNOQURlc2NyaXB0aXZlcy5SICANCi0gUnNjcmlwdDAyU2llbmFWYXJpYWJsZUZvcm1hdC5SICANCi0gUnNjcmlwdDAzU2llbmFSdW5Nb2RlbC5SICANCi0gUnNjcmlwdDA0U2llbmFCZWhhdmlvdXIuUg0KDQpQbGVhc2UgdmlzaXQgW0dpdEh1Yl0oaHR0cHM6Ly9naXRodWIuY29tL3NubGFiLW5sL3JzaWVuYS90cmVlL21haW4vaW5zdC9zY3JpcHRzKSBmb3IgdGhlIGxhdGVzdCAuUiBmaWxlcy4gDQoNCi0tLS0NCg0KIyMgRGF0YQ0KQWxsIGZpbGVzIChkYXRhLCBzY3JpcHRzLCBldGMuKSBjYW4gYWxzbyBiZSBmb3VuZCBvbiBbR2l0aHViXShodHRwczovL2dpdGh1Yi5jb20vSm9jaGVtVG9sc21hL1JzaWVuYS1zY3JpcHRzKQ0KDQotLS0tDQoNCiMjIENvbnRhY3QNClNwZWNpZmljIHF1ZXN0aW9ucyB3aXRoIHJlc3BlY3QgdG8gdGhlIC5ybWQgZmlsZXMgY2FuIGJlIGFkZHJlc3NlZCB0bzogW0pvY2hlbSBUb2xzbWFdKG1haWx0bzpqLnRvbHNtYUBydS5ubCkuICANCg0KRm9yIHF1ZXN0aW9ucyBvbiBSU2llbmEgcGxlYXNlIHZpc2l0IHRoZSBkZXNpZ25hdGVkIFtHaXRIdWJdKGh0dHBzOi8vZ2l0aHViLmNvbS9zbmxhYi1ubC9yc2llbmEpIHBhZ2UuIA0KDQotLS0tICANCg0KIyMgSW50cm9kdWN0aW9uICANCg0KQSBxdWljayB2ZXJzaW9uIG9mIHRoZSBtb2RlbCBmaXR0aW5nIHdpdGhvdXQgY29tbWVudHMgaXMgZ2l2ZW4gYXQgdGhlIGVuZCBvZiB0aGlzIHNjcmlwdC4gDQoNCkxldCB1cyBzdGFydCBieSBsb2FkaW5nIHRoZSBkYXRhIA0KDQoNCmBgYHtyLCByZXN1bHRzPSdob2xkJ30NCmxpYnJhcnkoUlNpZW5hKQ0KZnJpZW5kLmRhdGEudzEgPC0gczUwMQ0KZnJpZW5kLmRhdGEudzIgPC0gczUwMg0KZnJpZW5kLmRhdGEudzMgPC0gczUwMw0KZHJpbmsgPC0gczUwYQ0Kc21va2UgPC0gczUwcw0KZnJpZW5kc2hpcCA8LSBzaWVuYURlcGVuZGVudCgNCiAgYXJyYXkoIGMoIGZyaWVuZC5kYXRhLncxLCBmcmllbmQuZGF0YS53MiwgZnJpZW5kLmRhdGEudzMgKSwNCiAgICAgICAgIGRpbSA9IGMoIDUwLCA1MCwgMyApICkgKQ0Kc21va2UxIDwtIGNvQ292YXIoIHNtb2tlWyAsIDEgXSApDQphbGNvaG9sIDwtIHZhckNvdmFyKCBkcmluayApDQpteWRhdGEgPC0gc2llbmFEYXRhQ3JlYXRlKCBmcmllbmRzaGlwLCBzbW9rZTEsIGFsY29ob2wgKQ0KIyBhbmQgcmVxdWVzdA0KbXlkYXRhDQojIHRvIHNlZSB3aGF0IHlvdSBoYXZlIHByb2R1Y2VkLg0KYGBgDQoNCg0KUGFyYW1ldGVycyBvZiB0aGUgbW9kZWwgYXJlIGVzdGltYXRlZCBieSB0aGUgZnVuY3Rpb24gYHNpZW5hMDcoKWAuIFRoaXMgcmVxdWlyZXMgdGhlIGRhdGEgc3BlY2lmaWNhdGlvbjsgdGhlIGVmZmVjdHMgc3BlY2lmaWNhdGlvbjsgYW5kIGEgbnVtYmVyIG9mIHBhcmFtZXRlcnMsIG9yIHNldHRpbmdzLCBmb3IgdGhlIGVzdGltYXRpb24gYWxnb3JpdGhtLg0KDQpUaGUgbGF0dGVyIGFyZSBjb250YWluZWQgaW4gYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIGZ1bmN0aW9uIGBzaWVuYUFsZ29yaXRobUNyZWF0ZSgpYC4gWW91IGNhbiBsb29rIGF0IHRoZSBoZWxwIHByb3ZpZGVkIGJ5DQpgP3NpZW5hQWxnb3JpdGhtQ3JlYXRlYCB0byBmaW5kIG91dCBhYm91dCBvcHRpb25zIHRoYXQgeW91IG1heSB1c2UgaGVyZTsgZm9yIGJlZ2lubmluZyB1c2Vycywgb25seSB0aGUgdHdvIG9wdGlvbnMgbWVudGlvbmVkIGJlbG93IGFyZSByZWxldmFudC4gDQoNCk91dHB1dCB3aWxsIGJlIHdyaXR0ZW4gdG8gYSBmaWxlIHdpdGggbmFtZSAqKnByb2puYW1lLnR4dCoqLCB3aGVyZSBwcm9qbmFtZSBpcyB3aGF0ZXZlciBuYW1lIGlzIGdpdmVuOyB0aGUgZGVmYXVsdCAodXNlZCBpZiBubyBuYW1lIGlzIGdpdmVuKSBpcyBTaWVuYS4gVGhpcyBmaWxlIHdpbGwgYmUgd3JpdHRlbiB0byB5b3VyIGN1cnJlbnQgZGlyZWN0b3J5LiBOZXcgZXN0aW1hdGlvbiBydW5zIHdpbGwgYXBwZW5kIHRvIGl0LiBBIG5ldyBjYWxsIHRvIHByaW50MDFSZXBvcnQgd2lsbCBvdmVyd3JpdGUgaXQhDQoNCiMjIERlZmluZSBhbGdvcml0aG0gIA0KDQpgYGB7cn0NCm15YWxnb3JpdGhtIDwtIHNpZW5hQWxnb3JpdGhtQ3JlYXRlKHByb2puYW1lID0gJ3M1MF8zJykNCmBgYA0KDQoNCkxldCB1cyBmaXJzdCByZWRlZmluZSB0aGUgbW9kZWwsIHRvIG9idGFpbiBhIHNpbXBsZXIgc3BlY2lmaWNhdGlvbiB0aGF0IHdpbGwgc2VydmUgYXMgYW4gaWxsdXN0cmF0aW9uIGhlcmUuDQoNCmBgYHtyLCByZXN1bHRzPSdob2xkJ30NCm15ZWZmIDwtIGdldEVmZmVjdHMoIG15ZGF0YSApDQpteWVmZiA8LSBpbmNsdWRlRWZmZWN0cyggbXllZmYsIHRyYW5zVHJpcCwgY3ljbGUzICkNCm15ZWZmIDwtIGluY2x1ZGVFZmZlY3RzKCBteWVmZiwgZWdvWCwgYWx0WCwgZWdvWGFsdFgsDQogICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb24xID0gImFsY29ob2wiICkNCm15ZWZmIDwtIGluY2x1ZGVFZmZlY3RzKCBteWVmZiwgc2ltWCwgaW50ZXJhY3Rpb24xID0gInNtb2tlMSIgKQ0KbXllZmYNCmBgYA0KDQojIyBFc3RpbWF0ZSBtb2RlbCAgDQoNClRoZSBmdW5jdGlvbiBgc2llbmEwNygpYCBhY3R1YWxseSBmaXRzIHRoZSBzcGVjaWZpZWQgbW9kZWwgdG8gdGhlIGRhdGEuIElmIHlvdSB3aXNoIHRoZSBwcmV0dHkgcGljdHVyZSBvZiBTaWVuYSBvbiB0aGUgc2NyZWVuIGFzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcm9ncmVzcyBvZiB0aGUgYWxnb3JpdGhtLCB0eXBlOiANCg0KYGBge3J9DQphbnMgPC0gc2llbmEwNyggbXlhbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZikNCmBgYA0KDQooYW5zIGZvciAiYW5zd2VyIikuICANCg0KSWYgaG93ZXZlciB5b3UgZG8gbm90IHdhbnQgdGhlIHByZXR0eSBwaWN0dXJlLCBvciBpZiB0aGlzIGxlYWRzIHRvIGRpZmZpY3VsdGllcyAod2hpY2ggbWF5IGhhcHBlbiBlLmcuIG9uIGEgTWFjKSwgdGhlbiB0eXBlIGBhbnMgPC0gc2llbmEwNyhteWFsZ29yaXRobSwgZGF0YT1teWRhdGEsIGVmZmVjdHM9bXllZmYsIGJhdGNoPVRSVUUpYCBhbmQgaW50ZXJtZWRpYXRlIGluZm9ybWF0aW9uIHdpbGwgYmUgd3JpdHRlbiB0byB0aGUgY29uc29sZS4gIA0KDQpGdW5jdGlvbiBgc2llbmEwNygpYCBwcm9kdWNlcyBhIHNvLWNhbGxlZCBzaWVuYUZpdCBvYmplY3QsIGhlcmUgY2FsbGVkIGBhbnNgOyBhbmQgaXQgZmlsbHMgaW4gYSBmZXcgdGhpbmdzIGluIHRoZSBzaWVuYUVmZmVjdHMgb2JqZWN0IGBteWVmZmAsIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHVzZSBvZiBgbXllZmZgIGluIGEgc2llbmEwNyBjYWxsLiBCeSB1c2luZyB2YXJpb3VzIGRpZmZlcmVudCBlZmZlY3RzIG9iamVjdHMsIGkuZS4sIHdpdGggZGlmZmVyZW50IG5hbWVzLCB5b3UgY2FuIHN3aXRjaCBiZXR3ZWVuIHNwZWNpZmljYXRpb25zLiAgDQoNClRoZSBgYmF0Y2ggPSBGQUxTRWAgcGFyYW1ldGVycyB3aWxsIGdpdmUgYSBncmFwaGljYWwgdXNlciBpbnRlcmZhY2UgYmVpbmcgb3BlbmVkIHdoaWNoIHJlcG9ydHMgb24gdGhlIHByb2dyZXNzIG9mIHRoZSBlc3RpbWF0aW9uIGFsZ29yaXRobTsgYHZlcmJvc2UgPSBUUlVFYCBsZWFkcyB0byBleHRlbnNpdmUgZGlhZ25vc3RpYyBpbmZvcm1hdGlvbiBiZWluZyBzZW50IHRvIHRoZSBjb25zb2xlIGR1cmluZyB0aGUgZXN0aW1hdGlvbiwgYW5kIHJlc3VsdHMgYWZ0ZXIgdGhlIGVzdGltYXRpb24gKHRoZXNlIHJlc3VsdHMgYXJlIGFsc28gY29waWVkIHRvIHRoZSBvdXRwdXQgZmlsZSBwcm9qbmFtZS50eHQsIHNlZSBhYm92ZSk7IHdoaWxlIGBiYXRjaD1UUlVFYCBnaXZlcyBvbmx5IGEgbGltaXRlZCBhbW91bnQgb2YgcHJpbnRvdXQgc2VudCB0byB0aGUgY29uc29sZSBkdXJpbmcgdGhlIGVzdGltYXRpb24gKHdoaWNoIGlzIHNlZW4gd2hlbiBjbGlja2luZyBpbiB0aGUgY29uc29sZSwgb3IgbW9yZSBpbW1lZGlhdGVseSBpZiB0aGUgQnVmZmVyZWQgT3V0cHV0IGlzIGRlc2VsZWN0ZWQgaW4gdGhlIE1pc2MgbWVudSkgIHdoaWNoIG1vbml0b3JzIHRoZSBwcm9ncmVzcyBvZiB0aGUgZXN0aW1hdGlvbiBhbGdvcml0aG0gaW4gYSBkaWZmZXJlbnQgd2F5Lg0KDQpUaGUgY2FsbCBvZiBzaWVuYTA3IGxlYWRzIHRvIG91dHB1dCBpbiB0aGUgZmlsZSAqKnM1MF8zLnR4dCoqIChvciBtb3JlIGdlbmVyYWxseSBwcm9qbmFtZS50eHQsIHdoZXJlIHByb2puYW1lIGlzIHRoZSBuYW1lIGdpdmVuIGluIGBzaWVuYUFsZ29yaXRobUNyZWF0ZSgpYCkgYW5kIHRvIHRoZSBjcmVhdGlvbiBvZiB0aGUgb2JqZWN0IHdoaWNoIGhlcmUgaXMgY2FsbGVkIGFucyAoZm9yICJhbnN3ZXIiKS4gDQoNClRvIHVzZSBtdWx0aXBsZSBwcm9jZXNzb3JzLCBlLmcuLCBpZiB5b3Ugd2lzaCB0byB1c2UgMiBwcm9jZXNzZXMsIHJlcXVlc3Q6ICANCg0KYGFucyA8LSBzaWVuYTA3KCBteWFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmLCBuYnJOb2RlcyA9IDIsIHVzZUNsdXN0ZXIgPSBUUlVFKWAuICANCg0KQWRqdXN0IHRoZSBuYnJOb2RlcyB0byB0aGUgbnVtYmVyIHRoYXQgeW91IHdpc2ggdG8gdXNlLiBJZiB5b3Ugd2lzaCB0byB3b3JrIG9uIHdpdGggb3RoZXIgcHJvZ3JhbXMgd2hpbGUgcnVubmluZyBzaWVuYTA3LCBpdCBpcyBhZHZpc2FibGUgdG8gdXNlIG9uZSBub2RlIGxlc3MgdGhhbiB0aGUgbnVtYmVyIG9mIGF2YWlsYWJsZSBwcm9jZXNzb3JzLiBJZiB5b3Ugd2lzaCB0byB1c2Ugb3RoZXIgbWFjaGluZXMgYXMgd2VsbCwgc2VlIHRoZSBtb3JlIGRldGFpbGVkIGluc3RydWN0aW9ucyBiZWxvdy4gWW91IHdpbGwgdGhlbiBuZWVkIHRvIHVzZSB0aGUgY2x1c3RlclN0cmluZyBhcmd1bWVudCBhcyB3ZWxsLg0KDQoNCkZvciBtb3JlIGFkdmFuY2VkIHVzZSwgaXQgY2FuIGJlIGhlbHBmdWwgdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldHdvcmtzIHNpbXVsYXRlZCBpbiB0aGUgc28tY2FsbGVkIHRoaXJkIHBoYXNlIG9mIHRoZSBlc3RpbWF0aW9uIGFsZ29yaXRobS4gVGhlc2UgbmV0d29ya3MgY2FuIGJlIHVzZWQsIGUuZy4sIGZvciBjaGVja2luZyBnb29kbmVzcyBvZiBmaXQuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHVzaW5nIHRoZSBwYXJhbWV0ZXIgYHJldHVybkRlcHM9VFJVRWAuIFRoZSBmaXR0ZWQgb2JqZWN0IGBhbnNgIHdpbGwgdGhlbiBoYXZlIGEgY29tcG9uZW50IG5hbWVkICJzaW1zIiB3aGljaCBjb250YWlucyBhIGxpc3QgKGVhY2ggaXRlcmF0aW9uKSBvZiBsaXN0cyAoZWFjaCBkYXRhIG9iamVjdCkgb2YgbGlzdHMgKGVhY2ggZGVwZW5kZW50IG5ldHdvcmsgb3IgYmVoYXZpb3IgdmFyaWFibGUpIG9mIGVkZ2VsaXN0cyBmb3IgbmV0d29ya3Mgb3IgdmVjdG9ycyBmb3IgYmVoYXZpb3IgdmFyaWFibGVzLiBTZWUgdGhlIG1hbnVhbCBmb3IgZnVydGhlciBleHBsYW5hdGlvbi4NCg0KDQojIyBMb29raW5nIGF0IHRoZSByZXN1bHRzDQoNClRoZSBmaWxlICJzNTBfMy50eHQiIHdpbGwgY29udGFpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZXN0aW1hdGlvbi4gSXQgaXMgY29udGFpbmVkIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeSAoYGdldHdkKClgKS4gVGhpcyBmaWxlIGNhbiBiZSByZWFkIGJ5IGFueSB0ZXh0IGVkaXRvci4gQSBzdW1tYXJ5IG9mIHRoZSByZXN1bHRzIGlzIG9idGFpbmVkIG9uIHRoZSBzY3JlZW4gYnk6ICANCg0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCmFucw0KYGBgDQoNCmFuZCBhIGxhcmdlciBzdW1tYXJ5IGJ5Li4uDQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0Kc3VtbWFyeShhbnMpDQoNCmBgYA0KDQoNCkRlcGVuZGluZyBvbiB0aGUgcmFuZG9tIHNlZWQgYW5kIHRoZSBtb2RlbCBzcGVjaWZpY2F0aW9uLA0KdGhlIHJlc3VsdHMgY291bGQgYmUgc29tZXRoaW5nIGxpa2UgdGhlIGZvbGxvd2luZy4NCg0KDQpgYGB7ciwgZWNobz1GQUxTRX0NCnN1bW1hcnkoYW5zKQ0KDQpgYGANCg0KVGhlIHJlc3VsdHMgY2FuIGFsc28gYmUgdmlld2VkIGV4dGVybmFsbHkgaW4gdGhlIG91dHB1dCBmaWxlICoqczUwXzMudHh0KiouIEl0IGlzIGFkdmlzYWJsZSB0aGF0IHlvdSBoYXZlIGEgbG9vayBhdCBhbGwgdGhyZWUgcmVwb3J0cyBhbmQgdW5kZXJzdGFuZCBob3cgaW5mb3JtYXRpb24gaXMgb3JnYW5pemVkIGluIGVhY2ggb2YgdGhlbS4gIA0KDQpUbyB1bmRlcnN0YW5kIHRoZSB0YWJsZSBhYm92ZSwgbm90ZSB0aGF0IHRoZSAiY29udmVyZ2VuY2UgdC1yYXRpbyIgaXMgdGhlIHQtcmF0aW8gZm9yIGNvbnZlcmdlbmNlIGNoZWNraW5nLCBub3QgdGhlIHQgc3RhdGlzdGljIGZvciB0ZXN0aW5nIHRoZSBzaWduaWZpY2FuY2Ugb2YgdGhpcyBlZmZlY3QhIFNlZSBTZWN0aW9uIDYuMiBvZiB0aGUgbWFudWFsIHRvIHVuZGVyc3RhbmQgdGhpcyBiZXR0ZXIuICANCkluIHRoZSBleHRlcm5hbCBvdXRwdXQgZmlsZSwgdGhlc2UgYXJlIGNhbGxlZCAidC1yYXRpb3MgZm9yIGRldmlhdGlvbnMgZnJvbSB0YXJnZXRzIi4gVGhlIHJ1bGUgb2YgdGh1bWIgaXMgdGhhdCBhbGwgdC1yYXRpb3MgZm9yIGNvbnZlcmdlbmNlIHNob3VsZCBpZGVhbGx5IGJlIGxlc3MgdGhhbiAwLjEgaW4gYWJzb2x1dGUgdmFsdWUsIGFuZCB0aGUgIk92ZXJhbGwgbWF4aW11bSBjb252ZXJnZW5jZSByYXRpbyIgc2hvdWxkIGJlIGxlc3MgdGhhbiAwLjI1OyB0aGlzIHNpZ25pZmllcyBnb29kIGNvbnZlcmdlbmNlIG9mIHRoZSBhbGdvcml0aG0uICANCg0KSW4gdGhlIGV4YW1wbGUgaGVyZSwgdGhpcyBpcyB0aGUgY2FzZS4gSWYgdGhpcyB3b3VsZCBub3QgYmUgdGhlIGNhc2UsIHRoZSBiZXN0IHRoaW5nIHRvIGRvIHdvdWxkIGJlIHRvIGNvbnRpbnVlIHRoZSBlc3RpbWF0aW9uLCB1c2luZyB0aGUgZXN0aW1hdGVzIHByb2R1Y2VkIGhlcmUsIGFuZCBjb250YWluZWQgaW4gYW5zLCBhcyB0aGUgbmV3IGluaXRpYWwgdmFsdWVzLiBUaGlzIGlzIGV4cGxhaW5lZCBiZWxvdy4gQmVjYXVzZSB0aGUgZXN0aW1hdGlvbiBhbGdvcml0aG0gaXMgYmFzZWQgb24gcmFuZG9tIHNpbXVsYXRpb25zIG9mIHRoZSBuZXR3b3JrIGV2b2x1dGlvbiwgdGhlcmUgYWx3YXlzIHdpbGwgYmUgc21hbGwgZGlmZmVyZW5jZXMgYmV0d2VlbiBkaWZmZXJlbnQgcnVucyBvZiB0aGUgYWxnb3JpdGhtLiBUbyBvYnRhaW4gInB1YmxpY2F0aW9uIGdyYWRlIiBlc3RpbWF0ZXMsIHdoZXJlIHRoaXMgdmFyaWFiaWxpdHkgaXMgbWluaW1pemVkLCBjaG9vc2UgdGhlIHZhbHVlIG9mIHBhcmFtZXRlciBuMyBpbiBgc2llbmFBbGdvcml0aG1DcmVhdGUoKWAgKCJOdW1iZXIgb2YgaXRlcmF0aW9ucyBpbiBwaGFzZSAzIikgbGFyZ2VyIHRoYW4gdGhlIGRlZmF1bHQgdmFsdWUgb2YgMTAwMDsgZS5nLiwgYG4zPTUwMDBgLg0KDQpXaXRoIGZ1bmN0aW9uIHNpZW5hMDcgd2UgbWFkZSBhbnMgYXMgdGhlIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgcmVzdWx0cyBvZiB0aGUgZXN0aW1hdGlvbi4gRm9yIGV4YW1wbGUsDQoNCg0KYGBge3IsIHJlc3VsdHM9J2hvbGQnfQ0KYW5zJHRoZXRhDQoNCiMgY29udGFpbnMgdGhlIHZlY3RvciBvZiBwYXJhbWV0ZXIgZXN0aW1hdGVzLA0KDQphbnMkc2UNCg0KIyBjb250YWlucyB0aGUgc3RhbmRhcmQgZXJyb3JzLCB3aGlsZQ0KDQphbnMkY292dGhldGENCg0KIyBjb250YWlucyB0aGUgY292YXJpYW5jZSBtYXRyaXggb2YgdGhlIGVzdGltYXRlcy4NCg0KYGBgDQoNClRoZXJlIGFyZSBzZXZlcmFsICJtZXRob2RzIiBhdmFpbGFibGUgZm9yIHZpZXdpbmcgdGhlIG9iamVjdCBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBlc3RpbWF0aW9uLiANCkFib3ZlIHdlIGFscmVhZHkgbWVudGlvbmVkIHRoZSBjb21tYW5kcyBgYW5zYCBhbmQgYHN1bW1hcnkoYW5zKWAgVGhlIGNvbW1hbmQgYHNpZW5hLnRhYmxlKCBhbnMgKWAgd2lsbCBwcm9kdWNlIGluIHlvdXIgd29ya2luZyBkaXJlY3RvcnkgYSB0YWJsZSBmb3JtYXR0ZWQgZm9yIGluY2x1c2lvbiBpbiBhIExhVGVYIGRvY3VtZW50LiBUaGUgY29tbWFuZCBgc2llbmEudGFibGUoYW5zLCB0eXBlPSJodG1sIiApYCBwcm9kdWNlcyBhIHRhYmxlIGZvcm1hdHRlZCBpbiBodG1sLCB3aGljaCBjYW4gYmUgaW5jbHVkZWQsIGUuZy4sIGluIGEgV29yZCBkb2N1bWVudC4gU2VlIGA/cHJpbnQuc2llbmFGaXRgIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBlLmcuLCBhYm91dCB0aGUgdXNlIG9mIHRoZSB4dGFibGUgcGFja2FnZSBmb3IgUlNpZW5hOyBpZiB5b3UgdXNlIHh0YWJsZSwgc2VlIHRoZSBzZXQgb2YgdmlnbmV0dGVzIGZvciBbeHRhYmxlXShodHRwOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi9wYWNrYWdlcy94dGFibGUpLCB3aGljaCBnaXZlcyBtb3JlIG9wdGlvbnMuDQoNCg0KIyMgSW5pdGlhbGl6aW5nIHBhcmFtZXRlcnMgZm9yIGVzdGltYXRpb24NCg0KSWYgdGhlIGVzdGltYXRpb24gYWxnb3JpdGhtIGhhcyBub3QgcHJvZHVjZWQgZ29vZCBlc3RpbWF0ZXMgKGl0ICdoYXMgbm90IGNvbnZlcmdlZCB3ZWxsJyksIGFzIHdpbGwgYmUgaW5kaWNhdGVkIGJ5IHNvbWUgb2YgdGhlIHQtcmF0aW9zIGZvciBjb252ZXJnZW5jZSBiZWluZyBsYXJnZXIgdGhhbiAwLjEgb3IgdGhlIG92ZXJhbGwgbWF4aW11bSBjb252ZXJnZW5jZSByYXRpbyBiZWluZyBtb3JlIHRoYW4gMC4yNSwgKHRoZSBwcmVjaXNlIHZhbHVlcyBvZiB0aGVzZSB0aHJlc2hvbGRzIG1heSBiZSB0YWtlbiB3aXRoIGEgZ2FpbiBvZiBzYWx0KSB0aGUgYmVzdCB0aGluZyB0byBkbyBpcyBjb250aW51aW5nIHRoZSBlc3RpbWF0aW9uLCB1c2luZyB0aGUgZXN0aW1hdGVzIHByb2R1Y2VkIGhlcmUsIGFuZCBjb250YWluZWQgaW4gYGFuc2AsIGFzIHRoZSBuZXcgaW5pdGlhbCB2YWx1ZXMuICANCg0KVGhpcyBpcyBkb25lIGJ5IHRoZSBvcHRpb24gYHByZXZBbnNgICgncHJldmlvdXMgYW5zJykgYXMgaW46IA0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCmFucyA8LSBzaWVuYTA3KG15YWxnb3JpdGhtLCBkYXRhPW15ZGF0YSwgZWZmZWN0cz1teWVmZiwgcHJldkFucz1hbnMpDQpgYGANCg0KDQp0aGUgcGFyYW1ldGVyIGVzdGltYXRlcyBpbiBgYW5zYCB0aGVuIGFyZSBleHRyYWN0ZWQgYW5kIHVzZWQgaW4gdGhlIG5ldyBlc3RpbWF0aW9uOyBtb3Jlb3ZlciwgUGhhc2UgMSB3aWxsIGJlIG9taXR0ZWQgZnJvbSB0aGUgYWxnb3JpdGhtLCBhcyBkZXJpdmF0aXZlcyBhbmQgY292YXJpYW5jZSBtYXRyaXggYXJlIHVzZWQgZnJvbSB0aGUgcHJldmlvdXMgcnVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIG9ubHkgaWYgdGhlIG1vZGVsIHNwZWNpZmljYXRpb24gaW4gYG15ZWZmYCBoYXMgbm90IGNoYW5nZWQsIGFuZCBpZiB0aGUgcHJvdmlzaW9uYWwgcGFyYW1ldGVyIGVzdGltYXRlcyBvYnRhaW5lZCBpbiBgYW5zYCBhcmUgcmVhc29uYWJsZTsgaWYgdGhleSBhcmUgbm90IHJlYXNvbmFibGUsIG1ha2UgYSBmcmVzaCBlc3RpbWF0aW9uIHdpdGhvdXQgdGhlIGBwcmV2QW5zYCBwYXJhbWV0ZXIuDQoNCkluIFNlY3Rpb24gNi4zLjEgb2YgdGhlIG1hbnVhbCB5b3UgY2FuIHJlYWQgbW9yZSBhYm91dCB0aGUgaW5pdGlhbCB2YWx1ZXMgdXNlZCBmb3IgdGhlIGVzdGltYXRpb24gYWxnb3JpdGhtOyBidXQgdGhpcyByYXJlbHkgaXMgb2YgYW55IGNvbmNlcm4uIFNlY3Rpb25zIDYuMy02LjUgb2YgdGhlIG1hbnVhbCBnaXZlIGZ1cnRoZXIgaGVscC4NCg0KIyMgVGVzdGluZyBlZmZlY3RzIA0KDQpUaHJlZSB0eXBlcyBvZiB0ZXN0cyBhcmUgYXZhaWxhYmxlIGluIFNJRU5BOiAgDQoNCjEuIHQtdHlwZSB0ZXN0cyBvZiBzaW5nbGUgcGFyYW1ldGVycyBjYW4gYmUgY2FycmllZCBvdXQgYnkgZGl2aWRpbmcgdGhlIHBhcmFtZXRlciBlc3RpbWF0ZSBieSBpdHMgc3RhbmRhcmQgZXJyb3IuIFVuZGVyIHRoZSBudWxsIGh5cG90aGVzaXMgdGhhdCB0aGUgcGFyYW1ldGVyIGlzIDAsIHRoZXNlIHRlc3RzIGhhdmUgYXBwcm94aW1hdGVseSBhIHN0YW5kYXJkIG5vcm1hbCBkaXN0cmlidXRpb24uICANCjIuIFNjb3JlLXR5cGUgdGVzdHMgb2Ygc2luZ2xlIGFuZCBtdWx0aXBsZSBwYXJhbWV0ZXJzIGFyZSBkZXNjcmliZWQgaW4gdGhlIG1hbnVhbC4gIA0KMy4gV2FsZCB0ZXN0cyBvZiBzaW5nbGUgYW5kIG11bHRpcGxlIHBhcmFtZXRlcnMgY2FuIGJlIG9idGFpbmVkIGJ5IG1lYW5zIG9mIHRoZSBmdW5jdGlvbnMgYFdhbGQuUlNpZW5hKCkgYW5kIE11bHRpcGFyLlJTaWVuYSgpOyBzZWUgdGhlIGhlbHAgcGFnZXMgZm9yIHRoZXNlIGZ1bmN0aW9ucyBhbmQgYWxzbyBzZWUgdGhlIG1hbnVhbC4gIA0KDQoNCg0KUGFyYW1ldGVycyBjYW4gYmUgcmVzdHJpY3RlZCBieSBwdXR0aW5nIFRSVUUgaW4gdGhlIGluY2x1ZGUsIGZpeCBhbmQgdGVzdCBjb2x1bW5zIG9mIHRoZSBlZmZlY3RzIG9iamVjdC4gRm9yIGV4YW1wbGUsIHRvIHJlcXVlc3QgYSBzY29yZSB0ZXN0IGZvciB0aGUgaW5kZWdyZWUgcG9wdWxhcml0eSBlZmZlY3QsIHRoZSBjb21tYW5kcyBjYW4gYmUgYXMgZm9sbG93cy4NCg0KYGBge3J9DQpteWVmZiA8LSBzZXRFZmZlY3QobXllZmYsIGluUG9wU3FydCwgZml4PVRSVUUsIHRlc3Q9VFJVRSwgaW5pdGlhbFZhbHVlPTAuMCkNCmFucyA8LSBzaWVuYTA3KG15YWxnb3JpdGhtLCBkYXRhPW15ZGF0YSwgZWZmZWN0cz1teWVmZikNCnN1bW1hcnkoYW5zKQ0KYGBgDQoNClRvIHNlZSB0aGUgcmVzdWx0cywgaW5jbHVkaW5nIHRob3NlIGZvciB0aGUgc2NvcmUgdGVzdC4gWW91IGNhbiBhbHNvIHNpbXBseSByZXF1ZXN0OiAgDQpgYGB7cn0NCnNjb3JlLlRlc3QoYW5zKQ0KYGBgDQoNCg0Kc2VlIGA/c2NvcmUuVGVzdGAgZm9yIGZ1cnRoZXIgZXhwbGFuYXRpb24uICANCg0KIyMgVGltZSB0ZXN0IA0KDQpBbiBhcHBsaWNhdGlvbiBvZiB0aGUgc2NvcmUgdGVzdCBpcyBnaXZlbiBmb3IgdGhlIHNwZWNpYWwgY2FzZSBvZiBwYXJhbWV0ZXIgaGV0ZXJvZ2VuZWl0eSBieSBMb3NwaW5vc28gZXQgYWwuICgyMDEwKSBhbmQgaW1wbGVtZW50ZWQgaW4gUlNpZW5hLiBUbyBhcHBseSB0aGUgdGVzdCB0byB0aGUgcmVzdWx0cyBvYnRhaW5lZCBhYm92ZSwgcmVxdWVzdCwgZS5nLiwNCg0KYGBge3J9DQp0dDIgPC0gc2llbmFUaW1lVGVzdChhbnMpDQp0dDINCmBgYA0KDQoNCklmIHlvdSB3aXNoIG1vcmUgaW5mb3JtYXRpb24sIHNlZSBgc3VtbWFyeSh0dDIpYC4gIA0KDQotLS0gIA0KDQojIyBTdW1tYXJ5IA0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCiMjIyBTdGVwIDE6IGRlZmluZSBkYXRhICANCmZyaWVuZC5kYXRhLncxIDwtIHM1MDENCmZyaWVuZC5kYXRhLncyIDwtIHM1MDINCmZyaWVuZC5kYXRhLnczIDwtIHM1MDMNCmRyaW5rIDwtIHM1MGENCnNtb2tlIDwtIHM1MHMNCiMgZGVmaW5lIFJTaWVuYSBkYXRhIHN0cnVjdHVyZXMNCmZyaWVuZHNoaXAgPC0gc2llbmFEZXBlbmRlbnQoIGFycmF5KCBjKCBmcmllbmQuZGF0YS53MSwgZnJpZW5kLmRhdGEudzIsIGZyaWVuZC5kYXRhLnczICksIGRpbSA9IGMoIDUwLCA1MCwgMyApICkgKQ0Kc21va2UxIDwtIGNvQ292YXIoIHNtb2tlWyAsIDEgXSApDQphbGNvaG9sIDwtIHZhckNvdmFyKCBkcmluayApDQpteWRhdGEgPC0gc2llbmFEYXRhQ3JlYXRlKCBmcmllbmRzaGlwLCBzbW9rZTEsIGFsY29ob2wgKSANCg0KIyMjIFN0ZXAgMjogY3JlYXRlIGVmZmVjdHMgc3RydWN0dXJlIA0KbXllZmYgPC0gZ2V0RWZmZWN0cyggbXlkYXRhICkNCg0KIyMjIFN0ZXAgMzogZ2V0IGluaXRpYWwgZGVzY3JpcHRpb24NCnByaW50MDFSZXBvcnQoIG15ZGF0YSwgbW9kZWxuYW1lID0gJ3M1MF8zX2luaXQnICkNCg0KIyMjIFN0ZXA0OiBzcGVjaWZ5IG1vZGVsDQpteWVmZiA8LSBpbmNsdWRlRWZmZWN0cyggbXllZmYsIHRyYW5zVHJpcCwgY3ljbGUzICkNCm15ZWZmIDwtIGluY2x1ZGVFZmZlY3RzKCBteWVmZiwgZWdvWCwgYWx0WCwgZWdvWGFsdFgsIGludGVyYWN0aW9uMSA9ICJhbGNvaG9sIiApDQpteWVmZiA8LSBpbmNsdWRlRWZmZWN0cyggbXllZmYsIHNpbVgsIGludGVyYWN0aW9uMSA9ICJzbW9rZTEiICkNCg0KIyMjIFN0ZXA1IGVzdGltYXRlDQpteUFsZ29yaXRobSA8LSBzaWVuYUFsZ29yaXRobUNyZWF0ZSggcHJvam5hbWUgPSAnczUwXzMnICkNCihhbnMgPC0gc2llbmEwNyggbXlBbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZikpDQojICh0aGUgb3V0ZXIgcGFyZW50aGVzZXMgbGVhZCB0byBwcmludGluZyB0aGUgb2J0YWluZWQgcmVzdWx0IG9uIHRoZSBzY3JlZW4pDQojIGlmIG5lY2Vzc2FyeSwgZXN0aW1hdGUgZnVydGhlcg0KKGFucyA8LSBzaWVuYTA3KCBteUFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmLCBwcmV2QW5zPWFucykpDQpgYGAgDQoNCg0KLS0tIA0KDQpbKipOZXh0OiBTaWVuYUJlaGF2aW91ciBGT1IgTU9ERUxJTkcgTkVUV09SS1MgQU5EIEJFSEFWSU9VUiBCWSBSU0lFTkEqKl0oL3JzY3JpcHQwNC5odG1sKQ0KDQotLS0NCg0K</div>
<p>Copyright &copy; 2020 Jochem Tolsma</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("rscript03.rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
